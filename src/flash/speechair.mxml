<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" 
						creationComplete="init()">
	<mx:Script>
		<![CDATA[


	import com.spokentech.Speech;
	import org.osflash.thunderbolt.Logger;
	import mx.controls.Alert;
		
	private var speechapi:Speech;

	protected function init():void {

	    trace("trace init");
	    Logger.info("logger init");

	   //hard code the username password server url
	   var userid:String = "sal";
	   var password :String = "password";
	   //var speechServer:String ="rtmp://www.speechapi.com:1935/firstapp";
	   var speechServer:String ="http://www.speechapi.com:8000/speechcloud";

	   var auto:Boolean = false;

	   //create the speechapi object
	   speechapi = new Speech();
	   
	   //Init 
	   speechapi.initAir(userid,password,recCallback,ttsCallback,speechServer, micActivityCallback,micActivityCallbackHttp);


	   var grammar:String="one,two,three,four,five,six,seven,eight,nine,ten" ;
	   var gMode:String = 'Simple';
	   speechapi.setupRecognition(gMode, grammar, auto);
	}


	private  function speak(text:String, speaker:String):void {
	    speechapi.speak(text,speaker);
	}


	public function startRecognition():void {
	    trace("start");
	    Logger.info("start!");
	    speechapi.startRecognition();
        }

	public function stopRecognition():void {
	    trace("stop");
	    speechapi.stopRecognition();
	}


	public function recCallback(results:Object):void {
	   speak("you said, "+results.text, "male");
        }

	public function ttsCallback():void {
	}

	private function micActivityCallbackHttp(event:ActivityEvent,mic:Microphone):void {
	}

	private function micActivityCallback(event:ActivityEvent):void {
	}

			
		]]>
	</mx:Script>
	


	<!--mx:ComboBox id="comboMicList" x="100" y="10" dataProvider="{microphoneList}"/-->
	<mx:Button x="10" y="40" label="Start Rec" click="startRecognition()"/>
	<mx:Button x="97" y="40" label="Stop Rec" click="stopRecognition()"/>
	<!--mx:Button x="10" y="10" label="Select Mic" click="init()"/-->
	<!--mx:Button x="97" y="90" label="Test" click="speak('here here','a')"/-->
	<!--mx:Canvas width="100%" height="100%" id="myCanvas"></mx:Canvas--> 
	<!--mx:Canvas id="myCanvas" x="120" y="120" width="300" height="150" backgroundColor="#EEEEEE"/-->
	
	
</mx:WindowedApplication>
